var showTableRow=11;var showTable=0;var type={"dine":"\u5348\u665a\u9910","drink":"\u98f2\u6599","breakfast":"\u65e9\u9910"};function showMore(){showTableRow+=20;if($(".table tr").length<showTableRow)$("#showMoreButton").hide();$(".table").find("tr").each(function(i,el){if(i<showTableRow)$(this).show()})}
function showMoreTable(tableId){if($("#"+tableId+" table").css("display")!=="none"){$("#"+tableId+" p").hide();$("#"+tableId+" table").hide()}else{$("#"+tableId+" p").show();$("#"+tableId+" table").show()}event.preventDefault()}
function search(){if($("#searchInput").val()){$(".fb-share-button").remove();$("#loading").remove();$("#add_food").remove();$("#search").append("<div id='loading'>\u8cc7\u6599\u67e5\u8a62\u4e2d...</div>");$("body").find(".result").each(function(i,el){$(this).remove()});$("#detailResult").remove();var query="/api/"+$("#searchInput").val();$.getJSON(query,function(data){$("#loading").remove();if(data.length===0){$("#search").append("<div id='loading'>\u67e5\u7121\u8cc7\u6599</div>");$("#search").append('<p id="add_food">\u627e\u4e0d\u5230\u4f60\u8981\u7684\u9910\u5ef3\uff1f<a href="/add-food" class="btn btn-default" style="color: white;">\u7acb\u5373\u65b0\u589e</a></p>')}else $("#search").animate({top:"15%",
transform:"translate(-50%, -15%)"},"slow",function(){$.each(data,function(index,item){var result="";if(index)result+='<div class="well animated fadeIn result" id="result" style="margin-top: 20px"><h2 style="display:inline">'+item["name"]+'</h2><a href="/'+item["name"]+'" class="seeMore btn btn-flat btn-material-orange-A400">\u67e5\u770b\u66f4\u591a</a></div>';else result+='<div class="well animated fadeIn result" id="result"><h2 style="display:inline">'+item["name"]+'</h2><a href="/'+item["name"]+
'" class="seeMore btn btn-flat btn-material-orange-A400">\u67e5\u770b\u66f4\u591a</a></div>';$("#search").append(result)});$("#search").append('<p id="add_food">\u627e\u4e0d\u5230\u4f60\u77e5\u9053\u7684\u9910\u5ef3\uff1f<a href="/add-food" class="btn btn-default" style="color: white;">\u7acb\u5373\u65b0\u589e</a></p>')})})}else $("#search").append("<div id='loading'>\u8acb\u8f38\u5165\u8981\u67e5\u8a62\u7684\u5e97\u5bb6</div>")}
function showMoreComment(){$("#commnet").find(".row").each(function(i,el){$(this).show()});$("#showMoreCommentButton").hide()}$(document).keypress(function(e){if(e.which==13)if(!$("#addCommentModal").hasClass("in"))search()});
$(document).ready(function(){var allFoodData=[];$.ajax({url:"/api/auto-complete/",dataType:"json",jsonpCallback:"callback",type:"GET",success:function(data){$.each(data,function(index,value){var result={value:value,data:value};allFoodData.push(result)})}});$("#searchInput").autocomplete({lookup:allFoodData,preserveInput:true,onSelect:function(suggestion){window.location="/"+suggestion.data}})});