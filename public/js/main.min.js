function showMore(){showTableRow+=20,$(".table tr").length<showTableRow&&$("#showMoreButton").hide(),$(".table").find("tr").each(function(e,a){showTableRow>e&&$(this).show()})}function showMoreTable(e){"none"!==$("#"+e+" table").css("display")?($("#"+e+" p").hide(),$("#"+e+" table").hide()):($("#"+e+" p").show(),$("#"+e+" table").show()),event.preventDefault()}function search(){if($("#searchInput").val()){$(".fb-share-button").remove(),$("#loading").remove(),$("#add_food").remove(),$("#search").append("<div id='loading'>資料查詢中...</div>"),$("body").find(".result").each(function(e,a){$(this).remove()}),$("#detailResult").remove();var e="/api/"+$("#searchInput").val();$.getJSON(e,function(e){$("#loading").remove(),0===e.length?($("#search").append("<div id='loading'>查無資料</div>"),$("#search").append('<p id="add_food">找不到你要的餐廳？<a href="/add-food" class="btn btn-default" style="color: white;">立即新增</a></p>')):$("#search").animate({top:"15%",transform:"translate(-50%, -15%)"},"slow",function(){$.each(e,function(e,a){var n="";n+=e?'<div class="well animated fadeIn result" id="result" style="margin-top: 20px"><h2 style="display:inline">'+a.name+'</h2><a href="/'+a.name+'" class="seeMore btn btn-flat btn-material-orange-A400">查看更多</a></div>':'<div class="well animated fadeIn result" id="result"><h2 style="display:inline">'+a.name+'</h2><a href="/'+a.name+'" class="seeMore btn btn-flat btn-material-orange-A400">查看更多</a></div>',$("#search").append(n)}),$("#search").append('<p id="add_food">找不到你知道的餐廳？<a href="/add-food" class="btn btn-default" style="color: white;">立即新增</a></p>')})})}else $("#search").append("<div id='loading'>請輸入要查詢的店家</div>")}function showMoreComment(){$("#commnet").find(".row").each(function(e,a){$(this).show()}),$("#showMoreCommentButton").hide()}var showTableRow=11,showTable=0,type={dine:"午晚餐",drink:"飲料",breakfast:"早餐"};$(document).keypress(function(e){13==e.which&&($("#addCommentModal").hasClass("in")||search())}),$(document).ready(function(){var e=[];$.ajax({url:"/api/auto-complete/",dataType:"json",jsonpCallback:"callback",type:"GET",success:function(a){$.each(a,function(a,n){var t={value:n,data:n};e.push(t)})}}),$("#searchInput").autocomplete({lookup:e,preserveInput:!0,onSelect:function(e){window.location="/"+e.data}})});