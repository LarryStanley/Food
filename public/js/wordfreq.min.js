"use strict";!function(r){var e=function(r){var e={};r=r||{},r.workerUrl=r.workerUrl||"wordfreq.worker.js";var t,n=[],a=null,l=!1,o=function(r){n.push(r),a||c()},c=function(){a=n.shift(),t.postMessage({method:a.method,params:a.params}),delete a.method,delete a.params},u=function(r){var t=a.callback;a=null,t&&t.call(e,r.data),n.length&&c()},s=function(r){var t=a.callback;delete a.callback,t&&t.call(e,r.data),a=null,n.length&&c()},f=["process","empty","getList","getLength","getVolume"];f.forEach(function(r){e[r]=function(){if(!l){var t,n=arguments.length;"function"==typeof arguments[arguments.length-1]&&(t=arguments[arguments.length-1],n--);for(var a=[],c=0;n>c;)a[c]=arguments[c],c++;return o({method:r,params:a,callback:t}),e}}});var i=function(){l=!0,t.terminate(),t.onmessage=null,t.onerror=null,t=null};e.stop=function(r){if(!l){if(i(),!r)return a=null,n=[],e;for(a&&a.callback&&a.callback.call(e),a=null;n.length;){var t=n.shift();t.callback&&t.callback.call(e)}return e}};var m=function(){t=new Worker(r.workerUrl),t.onmessage=u,t.onerror=s,o({method:"init",params:[r]})};return m(),e};e.isSupported=!!(r.Worker&&Array.prototype.push&&Array.prototype.indexOf&&Array.prototype.forEach&&Array.isArray&&Object.create),"function"==typeof define&&define.amd?define("wordfreq",[],function(){return e}):r.WordFreq=e}(this);